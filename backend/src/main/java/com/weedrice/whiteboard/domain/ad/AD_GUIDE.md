# Ad 도메인 가이드

`ad` 도메인은 서비스 내에 노출되는 광고를 관리하고, 관련 통계를 수집하는 기능을 담당합니다.

## 1. 주요 기능 및 로직

`AdService`를 통해 다음과 같은 핵심 비즈니스 로직을 처리합니다.

- **광고 조회 (`getAd`):**
  - 특정 위치(`placement`)에 노출될 광고를 조회합니다.
  - 현재 활성화(`is_active = 'Y'`)되어 있고, 노출 기간(`start_date` ~ `end_date`) 내에 있는 광고 중에서 하나를 선택합니다. (현재는 첫 번째 광고를 반환하며, 추후 랜덤 또는 가중치 로직 추가 가능)
  - 광고가 노출될 때마다 `impression_count`(노출 수)를 1 증가시킵니다.

- **광고 클릭 기록 (`recordAdClick`):**
  - 사용자가 광고를 클릭했을 때 호출됩니다.
  - 해당 광고의 `click_count`(클릭 수)를 1 증가시킵니다.
  - `ad_click_logs` 테이블에 클릭 이력을 기록합니다.
  - 최종적으로 광고에 설정된 `target_url`을 반환하여 클라이언트가 해당 주소로 리디렉션할 수 있도록 합니다.

## 2. API Endpoints

`AdController`에서 다음 API를 제공합니다.

| Method | URI                         | 설명               |
| :----- | :-------------------------- | :----------------- |
| `GET`    | `/api/v1/ads`               | 특정 위치의 광고 조회 |
| `POST`   | `/api/v1/ads/{adId}/click`  | 광고 클릭 기록     |

## 3. 관련 DB 테이블

`ad` 도메인은 주로 다음 테이블과 상호작용합니다.

| 테이블명          | 엔티티          | 설명             |
| :---------------- | :-------------- | :--------------- |
| `ads`             | `Ad`            | 광고 정보        |
| `ad_click_logs`   | `AdClickLog`    | 광고 클릭 이력   |

이 문서는 `ad` 도메인의 기능을 이해하고 개발하는 데 도움을 주기 위해 작성되었습니다.
