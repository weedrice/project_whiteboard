# Tag 도메인 가이드

`tag` 도메인은 게시글에 사용되는 태그를 관리하고, 태그와 게시글을 연결하는 역할을 담당합니다.

## 1. 주요 기능 및 로직

`TagService`를 통해 다음과 같은 핵심 비즈니스 로직을 처리합니다.

- **게시글 태그 처리 (`processTagsForPost`):**
  - 게시글 생성 또는 수정 시 호출됩니다.
  - 기존 태그와 새로운 태그 목록을 비교하여, 추가되거나 삭제된 태그를 처리합니다.
  - **신규 태그:** `tags` 테이블에 존재하지 않으면 새로 생성하고, `post_tags` 테이블에 게시글과 연결합니다.
  - **기존 태그:** `tags` 테이블에 이미 존재하면, `post_tags` 테이블에 게시글과 연결합니다.
  - **삭제된 태그:** `post_tags` 테이블에서 연결을 끊습니다.
  - 태그가 추가/삭제될 때마다 `tags` 테이블의 `post_count`를 동기화합니다.

- **인기 태그 조회 (`getPopularTags`):**
  - `post_count`가 높은 순서대로 상위 태그 목록을 조회합니다.

## 2. API Endpoints

`TagController`에서 다음 API를 제공합니다.

| Method | URI                         | 설명                 |
| :----- | :-------------------------- | :------------------- |
| `GET`    | `/api/v1/tags`              | 인기 태그 목록 조회  |
| `GET`    | `/api/v1/tags/{tagId}/posts`| 특정 태그의 게시글 목록 조회 |

## 3. 관련 DB 테이블

`tag` 도메인은 주로 다음 테이블과 상호작용합니다.

| 테이블명      | 엔티티      | 설명                 |
| :------------ | :---------- | :------------------- |
| `tags`        | `Tag`       | 태그 마스터 정보     |
| `post_tags`   | `PostTag`   | 게시글과 태그의 연결 정보 (매핑 테이블) |

이 문서는 `tag` 도메인의 기능을 이해하고 개발하는 데 도움을 주기 위해 작성되었습니다.
