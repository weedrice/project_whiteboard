# File 도메인 가이드

`file` 도메인은 업로드 파일 저장/연결 및 임시 파일 정리를 담당합니다.

## 1. 주요 기능 및 로직
- 파일 업로드: 10MB 이하 파일을 검증 후 `FileStorageService`에 저장하고 원본명/크기/MIME 정보를 보관합니다.
- 단순 업로드 응답: `/upload` 엔드포인트는 업로드 후 바로 접근 가능한 프록시 URL과 fileId를 반환합니다.
- 파일 다운로드: 저장소에서 파일을 스트리밍하여 Content-Type, 다운로드 파일명 헤더를 설정합니다.
- 엔티티 연결: 게시글/사용자 등 연관 객체와 `related_id`, `related_type`으로 연결 관리.
- 임시 파일 정리: 24시간 동안 연관 객체가 없는 파일을 스케줄러가 저장소·DB에서 정리합니다.

## 2. API Endpoints

| Method | URI | 설명 |
| :----- | :-------------------------- | :------------------------------ |
| `POST` | `/api/v1/files` | 파일 업로드 후 메타 반환 |
| `POST` | `/api/v1/files/upload` | 업로드 + 프록시 URL 반환 |
| `GET` | `/api/v1/files/{fileId}` | 파일 다운로드(스트리밍) |

## 3. 관련 DB 테이블

| 테이블명 | 엔티티 | 설명 |
| :------- | :----- | :--- |
| `files` | `File` | 업로드 파일 메타·연관 정보 |
